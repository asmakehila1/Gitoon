{% extends 'layout.html.twig' %}

{% block title %}Evenement index{% endblock %}

{% block body %}
    <h1>Evenement index</h1>
    <input type="text" id="search">
    <table class="table">
        <thead>
            <tr>
                <th>Id </th>
                <th>Nom</th>
                <th>Prix event</th>
                <th>Descrption_event</th>
                <th>date_debut</th>
                <th>date_fin</th>
                <th>Statut</th>
                <th>Photo_event</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody id="body">
        {% for evenement in evenements %}
            <tr>
                <td>{{ evenement.id }}</td>
                <td>{{ evenement.nom }}</td>
                <td>{{ evenement.prixEvent }}</td>
                <td>{{ evenement.descrptionEvent }}</td>
                <td>{{ evenement.date_debut|date("d/m/Y") }}</td>
                <td>{{ evenement.date_fin|date("d/m/Y") }}</td>
                <td>{% if evenement.actif == true %} En cours {% elseif evenement.actif == false %} pas en cours {% endif %}</td>
                <td><img src ="{{ asset('uploads/images/' ~ evenement.photoEvent) }}"
                         alt =""  width="100" height="100"></td>
                <td>
                    {{ include('evenement/_delete_form.html.twig') }}
                    <a href="{{ path('evenement_show', {'id': evenement.id}) }}">show</a>
                    <a href="{{ path('evenement_edit', {'id': evenement.id}) }}">edit</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a href="{{ path('evenement_new') }}">Create new</a>
{% endblock %}

{% block js %}
<script>
    $(document).ready(function(){
        $("#search").change(function(){
            $.ajax({url: "/evenement/search/"+$("#search").val(), success: function(result){
                    $("#body").html(result);
                }});
        });
    });
</script>
{% endblock %}